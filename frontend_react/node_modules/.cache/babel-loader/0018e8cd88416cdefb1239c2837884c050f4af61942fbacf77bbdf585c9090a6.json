{"ast":null,"code":"import _objectSpread from\"C:/Users/Jergus/Documents/web/django/rest_notes/frontend_react/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:/Users/Jergus/Documents/web/django/rest_notes/frontend_react/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Jergus/Documents/web/django/rest_notes/frontend_react/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Jergus/Documents/web/django/rest_notes/frontend_react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from'react';import{Link,useParams}from'react-router-dom';import{ReactComponent as ArrowLeft}from'../assets/arrow-left.svg';import{useNavigate}from'react-router-dom';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var NotePage=function NotePage(){var _useParams=useParams(),id=_useParams.id;var history=useNavigate();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),note=_useState2[0],setNote=_useState2[1];var handleSubmit=function handleSubmit(){if(id!=='new'&&note!==null){updateNote();}};var handleAdding=function handleAdding(){if(note!==null){createNote();}};useEffect(function(){getNote();},[id]);var getNote=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(id!=='new')){_context.next=8;break;}_context.next=3;return fetch(\"http://127.0.0.1:8000/api/notes/\".concat(id,\"/\"));case 3:response=_context.sent;_context.next=6;return response.json();case 6:data=_context.sent;setNote(data);case 8:case\"end\":return _context.stop();}}},_callee);}));return function getNote(){return _ref.apply(this,arguments);};}();var updateNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:axios.put(\"http://127.0.0.1:8000/api/notes/\".concat(id,\"/update/\"),{text:note.text,name:note.name});case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function updateNote(){return _ref2.apply(this,arguments);};}();var createNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(){return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:axios.post(\"http://127.0.0.1:8000/api/notes/create/\",{text:note.text,name:note.name});case 1:case\"end\":return _context3.stop();}}},_callee3);}));return function createNote(){return _ref3.apply(this,arguments);};}();var deleteNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:axios.delete(\"http://127.0.0.1:8000/api/notes/\".concat(id,\"/delete/\"));history('/');case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function deleteNote(){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"note\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"note-header\",onClick:handleSubmit(),children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\" \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:/*#__PURE__*/_jsx(ArrowLeft,{})})]}),/*#__PURE__*/_jsx(\"input\",{maxlength:\"23\",placeholder:\"Name\",onChange:function onChange(e){{setNote(_objectSpread(_objectSpread({},note),{},{'name':e.target.value}));}},defaultValue:note===null||note===void 0?void 0:note.name}),/*#__PURE__*/_jsx(Link,{to:\"/\",children:id!=='new'?/*#__PURE__*/_jsx(\"button\",{onClick:deleteNote,children:\"Delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:handleAdding,children:\"Add new\"})})]}),/*#__PURE__*/_jsx(\"textarea\",{maxlength:\"4990\",onChange:function onChange(e){{setNote(_objectSpread(_objectSpread({},note),{},{'text':e.target.value}));}},defaultValue:note===null||note===void 0?void 0:note.text})]});};export default NotePage;","map":{"version":3,"names":["React","useEffect","useState","Link","useParams","ReactComponent","ArrowLeft","useNavigate","axios","NotePage","id","history","note","setNote","handleSubmit","updateNote","handleAdding","createNote","getNote","fetch","response","json","data","put","text","name","post","deleteNote","delete","e","target","value"],"sources":["C:/Users/Jergus/Documents/web/django/rest_notes/frontend_react/src/components/NotePage.js"],"sourcesContent":["\r\nimport React, { useEffect, useState } from 'react'\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport { ReactComponent as ArrowLeft } from '../assets/arrow-left.svg';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nconst NotePage = () => {\r\n    const { id } = useParams();\r\n    let history = useNavigate();\r\n    let [note, setNote] = useState(null)\r\n    let handleSubmit = () => {\r\n        if (id !== 'new' && note !== null) {\r\n            updateNote();\r\n        }\r\n\r\n\r\n    }\r\n    let handleAdding = () => {\r\n        if (note !== null) {\r\n            createNote()\r\n        }\r\n    }\r\n    useEffect(() => {\r\n        getNote()\r\n    }, [id])\r\n\r\n    let getNote = async () => {\r\n        if (id !== 'new') {\r\n            let response = await fetch(`http://127.0.0.1:8000/api/notes/${id}/`)\r\n            let data = await response.json()\r\n\r\n            setNote(data)\r\n        }\r\n\r\n    }\r\n    let updateNote = async () => {\r\n\r\n        axios.put(`http://127.0.0.1:8000/api/notes/${id}/update/`, {\r\n            text: note.text,\r\n            name: note.name,\r\n\r\n        })\r\n    }\r\n    let createNote = async () => {\r\n\r\n        axios.post(`http://127.0.0.1:8000/api/notes/create/`, {\r\n\r\n            text: note.text,\r\n            name: note.name,\r\n\r\n        })\r\n    }\r\n    let deleteNote = async () => {\r\n\r\n        axios.delete(`http://127.0.0.1:8000/api/notes/${id}/delete/`)\r\n        history('/')\r\n\r\n    }\r\n    return (\r\n\r\n        <div className='note'>\r\n\r\n            <div className='note-header' onClick={(handleSubmit())}>\r\n                <h3> <Link to='/'><ArrowLeft /></Link >\r\n\r\n                </h3>\r\n                <input maxlength='23' placeholder=\"Name\" onChange={(e) => { { setNote({ ...note, 'name': e.target.value }) } }} defaultValue={note?.name}></input>\r\n                <Link to='/'>{id !== 'new' ? (<button onClick={deleteNote}>Delete</button>) : (<button onClick={handleAdding}>Add new</button>)}</Link >\r\n            </div>\r\n\r\n\r\n\r\n            <textarea maxlength='4990' onChange={(e) => { { setNote({ ...note, 'text': e.target.value }) } }} defaultValue={note?.text}></textarea>\r\n\r\n        </div >\r\n    )\r\n}\r\n\r\nexport default NotePage\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}